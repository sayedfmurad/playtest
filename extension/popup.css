:root { color-scheme: dark; }
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; }
body { width: 500px; min-height: 520px; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background: #0b1020; color: #e6e9f5; }
.header { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid #1a2540; }
.header-right { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
.title { font-weight: 600; letter-spacing: .3px; }
.badge { background: #12203a; color: #8fb3ff; border: 1px solid #1e2c4d; padding: 2px 6px; border-radius: 999px; font-size: 11px; }
.body { padding: 12px; display: grid; gap: 10px; }
.row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.btn { background: #3b82f6; color: white; border: 0; padding: 6px 10px; border-radius: 8px; cursor: pointer; font-size: 12px; }
.btn:hover { background: #2f6bdc; }
.btn-secondary { background: #1f2b4a; color: #c3d3ff; border: 1px solid #283861; }
.step .btn { padding: 4px 8px; }
.input { width: 100%; background: #0f1830; border: 1px solid #1e2c4d; color: #e6e9f5; border-radius: 8px; padding: 8px 10px; min-width: 140px; }
.input-sm { padding: 5px 8px; font-size: 12px; min-width: 160px; }
.select { background: #0f1830; border: 1px solid #1e2c4d; color: #e6e9f5; border-radius: 8px; padding: 6px 8px; min-width: 150px; }
.small { color: #aab2cc; font-size: 12px; }
.ml6 { margin-left: 6px; }
.flex1 { flex: 1 1 240px; }

.steps { display: grid; gap: 10px; }
.steps-toolbar { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.step { border: 1px solid #1a2540; border-radius: 10px; padding: 8px; display: grid; gap: 6px; background: #0f1530; }
.step-name-row { display: flex; align-items: center; gap: 6px; margin-bottom: 4px; }
.step-name-input { flex: 1; background: transparent; border: none; color: #e6e9f5; font-size: 14px; font-weight: 500; padding: 4px 6px; border-radius: 4px; outline: none; }
.step-name-input:hover { background: #12203a; }
.step-name-input:focus { background: #12203a; border: 1px solid #3b82f6; }
.step-left { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
.step-right { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
.step-index { width: 24px; display: inline-flex; align-items: center; justify-content: center; background: #12203a; border: 1px solid #1e2c4d; color: #aab2cc; border-radius: 6px; font-size: 12px; }
.icon-btn { background: #12203a; color: #dfe6ff; border: 1px solid #223357; padding: 4px 6px; border-radius: 6px; cursor: pointer; }
.icon-btn:hover { background: #172a52; }
.icon-btn.danger { background: #3a1212; border-color: #5a1e1e; color: #ffbbbb; }
.pill { display: inline-block; border-radius: 999px; padding: 2px 6px; font-size: 10px; border: 1px solid #1e2c4d; }
.pill-ok { background: #0d3822; color: #8dffbf; }
.pill-err { background: #3a1212; color: #ff9a9a; }
.spinner { width: 12px; height: 12px; border-radius: 50%; border: 2px solid #3b82f6; border-top-color: transparent; display: inline-block; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Modal styles */
.modal-backdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1040; }
.modal { display: block; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1050; max-width: 90%; max-height: 90vh; overflow-y: auto; }
.modal-dialog { width: 100%; min-width: 300px; max-width: 450px; margin: 0; }
.modal-content { background: #0f1830; border: 1px solid #1e2c4d; border-radius: 12px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5); }
.modal-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; border-bottom: 1px solid #1a2540; }
.modal-title { font-size: 16px; font-weight: 600; color: #e6e9f5; margin: 0; }
.modal-body { padding: 20px; }
.modal-footer { display: flex; align-items: center; justify-content: flex-end; gap: 10px; padding: 16px 20px; border-top: 1px solid #1a2540; }
.btn-close { background: transparent; border: 0; color: #aab2cc; font-size: 24px; line-height: 1; cursor: pointer; padding: 0; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; }
.btn-close:hover { color: #e6e9f5; }
.btn-close::before { content: 'Ã—'; }
.form-control { width: 100%; background: #0f1830; border: 1px solid #1e2c4d; color: #e6e9f5; border-radius: 8px; padding: 10px 12px; font-size: 14px; }
.form-control:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1); }
.w-100 { width: 100%; }
.mb-2 { margin-bottom: 8px; }
.btn-primary { background: #3b82f6; color: white; border: 0; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500; }
.btn-primary:hover { background: #2f6bdc; }
.btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }
.modal-body p { color: #aab2cc; margin: 0; }

/* Responsive modal */
@media (max-width: 480px) {
  .modal { max-width: 95%; }
  .modal-dialog { min-width: 280px; max-width: 100%; }
  .modal-header, .modal-body, .modal-footer { padding: 12px 16px; }
}
